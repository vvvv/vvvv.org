import{o as k,R as v,s as B}from"./app.js";import{s as w}from"./app-ListStoreHelper-3cgiOj9z.js";import{a as c}from"./app-utils-BxZ-CQXf.js";import{_ as L,a as C}from"./app-ListNavigation-37tSoHkn.js";import{u as z,_ as R,L as V}from"./app-useMapView-BRuhWYet.js";import{r as M,k as N,w as $,f as D,c as f,b as a,_ as d,J as O,M as l,u as t,N as P,F as j,o as r}from"./app-vue-BvXrwsFo.js";import"./app-icons-CLxSSBpP.js";import"./app-Dropdown-L8tdEyEf.js";import"./app-is-browser-DqcmxZSF.js";import"./app-Tag-rZsY_IHN.js";import"./app-LinksHelper-DaRHqwYW.js";import"./app-logos-BYnG71Bo.js";import"./app-lodash-Cpj98o6Y.js";import"./app-PerformantEllipsis-Y9OIss__.js";import"./app-Ellipsis-OnfN92X5.js";import"./app-defaultLogo-CbgmFOV4.js";import"./app-Location-c3c_cTRT.js";import"./app-Internships-CJI2UJUs.js";import"./app-leaflet-CCReQ7N0.js";const q=Object.create(w("business")),x=k("businessList",q),F={class:"row mb-2"},E={class:"col-12 col-lg-4"},J={key:0,class:"communityList"},re={__name:"BusinessList",emits:["logout"],setup(K,{emit:A}){const i=B(),n=v(),e=x(),u=M(null),{fillMap:g,center:_,zoom:y}=z(u,c),m=[{label:"10 per page",value:10},{label:"50 per page",value:50},{label:"100 per page",value:100}];N(async()=>{e.setSection("list"),await p(n.query)}),$(()=>n.query,async(s,o)=>{s!=o&&await p(n.query)},{deep:!0});async function p(s){if(s.b){c(s.b);return}else s.section&&e.setSection(s.section,s.type);try{await e.getData({page:0,size:m[0].value}),g(e.list.list.items)}catch(o){console.log(o)}}function h(s){s=="connections"?i.push({name:"Businesses",query:{section:s,type:e.selectedConnection.key??"github"}}):s=="list"&&i.push({name:"Businesses",query:{section:s}})}function b(s){i.push({name:"Businesses",query:{section:e.selectedSection.key,type:s}})}const S=D(()=>{if(e.list?.list)return`${e.list.list.total} Businesses that use vvvv:`});return(s,o)=>(r(),f(j,null,[a("div",F,[a("div",E,[l(L,{sections:t(e).sections,selected:t(e).selectedSection.key,onSelect:h},null,8,["sections","selected"])])]),t(e).selectedSection.key=="list"?(r(),f("div",J,[a("p",null,P(S.value),1),l(R,{ref_key:"mapRef",ref:u,center:t(_),zoom:t(y)},null,8,["center","zoom"]),l(V,{loading:t(e).loading,list:t(e).list?.list,onClick:t(c),class:"mt-4"},null,8,["loading","list","onClick"])])):d("",!0),t(e).selectedSection.key=="connections"?(r(),O(C,{key:1,list:t(e).list?.connections,options:t(e).socialOptions,connection:t(e).selectedConnection,pageSizes:m,loading:t(e).loading,connectionKey:"business",onChange:b,onPage:t(e).getData},null,8,["list","options","connection","loading","onPage"])):d("",!0)],64))}};export{re as default};
