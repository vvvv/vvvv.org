import{n as v,R as B,q as w}from"./app.js";import{s as L}from"./app-ListStoreHelper-BWgKP_GU.js";import{a}from"./app-utils-BwJ1Zz0n.js";import{_ as C,a as z}from"./app-ListNavigation-DmPcM0kt.js";import{u as R,_ as V,L as M}from"./app-useMapView-Dl3wQwno.js";import{r as N,k as $,w as q,f as D,c as f,b as l,_ as r,J as d,M as g,u as s,N as O,F as P,o as i}from"./app-vue-BvXrwsFo.js";import"./app-icons-CLxSSBpP.js";import"./app-Dropdown-BN26keGm.js";import"./app-is-browser-DqcmxZSF.js";import"./app-Tag-CHejiJHf.js";import"./app-LinksHelper-B1DEfK74.js";import"./app-logos-BYnG71Bo.js";import"./app-lodash-Cpj98o6Y.js";import"./app-PerformantEllipsis-BlZvY6BL.js";import"./app-Ellipsis-SAi-zGI7.js";import"./app-defaultLogo-CbgmFOV4.js";import"./app-Location-DZC7CBwF.js";import"./app-Internships-DSvJ8hoO.js";import"./app-leaflet-Cnz855CM.js";const j=Object.create(L("business")),x=v("businessList",j),F={class:"row mb-2"},E={class:"col-12 col-lg-4"},J={key:0,class:"communityList"},re={__name:"BusinessList",emits:["logout"],setup(K,{emit:A}){const n=w(),c=B(),e=x(),u=N(null),{fillMap:_,center:y,zoom:h}=R(u,a),m=[{label:"10 per page",value:10},{label:"50 per page",value:50},{label:"100 per page",value:100}];$(async()=>{e.setSection("list"),await p(c.query)}),q(()=>c.query,async(t,o)=>{t!=o&&await p(c.query)},{deep:!0});async function p(t){if(t.b){a(t.b);return}else t.section&&e.setSection(t.section,t.type);try{await e.getData({page:0,size:m[0].value}),_(e.list.list.items)}catch(o){console.log(o)}}function k(t){t=="connections"?n.push({name:"Businesses",query:{section:t,type:e.selectedConnection.key??"github"}}):t=="list"&&n.push({name:"Businesses",query:{section:t}})}function S(t){n.push({name:"Businesses",query:{section:e.selectedSection.key,type:t}})}const b=D(()=>{if(e.list?.list)return`${e.list.list.total} Businesses that use vvvv:`});return(t,o)=>(i(),f(P,null,[l("div",F,[l("div",E,[g(C,{sections:s(e).sections,selected:s(e).selectedSection.key,onSelect:k},null,8,["sections","selected"])])]),s(e).selectedSection.key=="list"?(i(),f("div",J,[l("p",null,O(b.value),1),g(V,{ref_key:"mapRef",ref:u,center:s(y),zoom:s(h)},null,8,["center","zoom"]),s(e).selectedSection.key=="list"?(i(),d(M,{key:0,loading:s(e).loading,list:s(e).list?.list,onClick:s(a),class:"mt-4"},null,8,["loading","list","onClick"])):r("",!0)])):r("",!0),s(e).selectedSection.key=="connections"?(i(),d(z,{key:1,list:s(e).list?.connections,options:s(e).socialOptions,connection:s(e).selectedConnection,pageSizes:m,loading:s(e).loading,connectionKey:"business",onChange:S,onPage:s(e).getData},null,8,["list","options","connection","loading","onPage"])):r("",!0)],64))}};export{re as default};
