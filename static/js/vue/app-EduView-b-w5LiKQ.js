import{C as g,R as h,T as k}from"./app.js";import{c as y,t as b,j as R,k as E}from"./app-utils-BxZ-CQXf.js";import{_ as U,a as N}from"./app-InstitutionBasics-BRi9gQHJ.js";import{N as C}from"./app-Alert-Cw6L5sgq.js";import{r as i,k as A,f as H,J as p,L as _,u as f,o as r,_ as u,c as v,t as M,N as x,b as a,M as w,F as B}from"./app-vue-BvXrwsFo.js";import"./app-icons-CLxSSBpP.js";import"./app-lodash-Cpj98o6Y.js";import"./app-defaultLogo-CbgmFOV4.js";import"./app-SocialView-Cj-akjiC.js";import"./app-LinksHelper-DaRHqwYW.js";import"./app-logos-BYnG71Bo.js";import"./app-Internships-CJI2UJUs.js";const L="?withoutEnlargement=true&quality=98&fit=cover&width=300&format=png",S=g.BASEURL+"items/Edu?fields=*,social.*,owner.username,people.User_Role_id.role,people.User_Role_id.user_id.username&filter[slug][_eq]=";async function T(c){const d=S+c,n=await fetch(d),s=await n.json();if(n.ok){if(s.data.length==0)throw"Can't find a profile for this Educational Institution";const e={...s.data[0]};return e.people=e.people.filter(t=>t.User_Role_id.user_id!==null),e.people=e.people.map(t=>({role:t.User_Role_id.role,username:t.User_Role_id.user_id.username,link:"/people/"+t.User_Role_id.user_id.username})),e.logo=e?.logo?y(e.logo)+L:null,e}else throw new Error("Can't load Profile")}const V={key:1},I={class:"row"},P={class:"col-12 col-md-6 col-lg-4 mb-sm-2"},j={class:"col-12 col-md-6 col-lg-8 mt-md-0 pt-md-0 profileContent"},q=["innerHTML"],Z={__name:"EduView",emits:["logout"],setup(c,{emit:d}){const s=h().params?.slug,e=i(null),t=i(!1),l=i(null);return A(async()=>{window.scrollTo({top:0,left:0,behavior:"smooth"});try{t.value=!0,l.value=null,e.value=await T(s),document.title="Profile: "+e.value.name,e.value.description=b(e.value.description)}catch(o){console.log(o),l.value="Something went wrong or maybe an Institutional Institution is simply not yet confirmed."}finally{t.value=!1}}),H(()=>{let o=null;return e.value.social?.website&&e.value.social.website!==""&&(o={name:E(e.value.social.website),link:R(e.value.social.website)}),o}),(o,m)=>(r(),p(f(k),{show:t.value},{default:_(()=>[l.value?(r(),p(f(C),{key:0,title:"Hoppala",type:"warning"},{default:_(()=>[M(x(l.value),1)]),_:1})):u("",!0),e.value?(r(),v("div",V,[a("div",I,[a("div",P,[w(U,{data:e.value},null,8,["data"])]),a("div",j,[e.value.description?(r(),v(B,{key:0},[m[0]||(m[0]=a("div",{class:"border-top d-flex d-md-none mt-2 mb-4"},null,-1)),a("p",{innerHTML:e.value.description,class:"markdown-content"},null,8,q)],64)):u("",!0),w(N,{class:"maintained mt-4 pt-3 border-top d-block d-md-none",data:e.value.owner},null,8,["data"])])])])):u("",!0)]),_:1},8,["show"]))}};export{Z as default};
