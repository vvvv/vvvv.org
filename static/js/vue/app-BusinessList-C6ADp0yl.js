import{o as v,R as B,s as w}from"./app.js";import{s as C}from"./app-ListStoreHelper-3cgiOj9z.js";import{a}from"./app-utils-BxZ-CQXf.js";import{_ as L,a as z}from"./app-ListNavigation-37tSoHkn.js";import{u as M,M as R,L as V}from"./app-useMapView-QD7Yd6kx.js";import{r as N,k as D,w as O,f as P,c as f,b as c,_ as d,J as $,M as l,u as s,F as g,N as j,o as r}from"./app-vue-BvXrwsFo.js";import"./app-icons-CLxSSBpP.js";import"./app-Dropdown-L8tdEyEf.js";import"./app-is-browser-DqcmxZSF.js";import"./app-Tag-rZsY_IHN.js";import"./app-LinksHelper-DaRHqwYW.js";import"./app-logos-BYnG71Bo.js";import"./app-lodash-Cpj98o6Y.js";import"./app-PerformantEllipsis-Y9OIss__.js";import"./app-Ellipsis-OnfN92X5.js";import"./app-defaultLogo-CbgmFOV4.js";import"./app-Location-c3c_cTRT.js";import"./app-Internships-CJI2UJUs.js";import"./app-leaflet-BrvYRaJH.js";const q=Object.create(C("business")),x=v("businessList",q),F={class:"row mb-2"},E={class:"col-12 col-lg-4"},le={__name:"BusinessList",emits:["logout"],setup(J,{emit:K}){const i=w(),n=B(),e=x(),u=N(null),{fillMap:_,center:y,zoom:h}=M(u,a),p=[{label:"10 per page",value:10},{label:"50 per page",value:50},{label:"100 per page",value:100}];D(async()=>{e.setSection("list"),await m(n.query)}),O(()=>n.query,async(t,o)=>{t!=o&&await m(n.query)},{deep:!0});async function m(t){if(t.b){a(t.b);return}else t.section&&e.setSection(t.section,t.type);try{await e.getData({page:0,size:p[0].value}),_(e.list.list.items)}catch(o){console.log(o)}}function b(t){t=="connections"?i.push({name:"Businesses",query:{section:t,type:e.selectedConnection.key??"github"}}):t=="list"&&i.push({name:"Businesses",query:{section:t}})}function S(t){i.push({name:"Businesses",query:{section:e.selectedSection.key,type:t}})}const k=P(()=>{if(e.list?.list)return`${e.list.list.total} Businesses that use vvvv:`});return(t,o)=>(r(),f(g,null,[c("div",F,[c("div",E,[l(L,{sections:s(e).sections,selected:s(e).selectedSection.key,onSelect:b},null,8,["sections","selected"])])]),s(e).selectedSection.key=="list"?(r(),f(g,{key:0},[c("p",null,j(k.value),1),l(R,{ref_key:"mapRef",ref:u,center:s(y),zoom:s(h)},null,8,["center","zoom"]),l(V,{loading:s(e).loading,list:s(e).list?.list,onClick:s(a),class:"mt-4"},null,8,["loading","list","onClick"])],64)):d("",!0),s(e).selectedSection.key=="connections"?(r(),$(z,{key:1,list:s(e).list?.connections,options:s(e).socialOptions,connection:s(e).selectedConnection,pageSizes:p,loading:s(e).loading,connectionKey:"business",onChange:S,onPage:s(e).getData},null,8,["list","options","connection","loading","onPage"])):d("",!0)],64))}};export{le as default};
