import{F as L,f as j,b as D,J as N,d as T,Y as E,h as y}from"./app.js";import{v as $,N as B}from"./app-utils-IjCUxnmS.js";import{d as M,h as p,r as u,f as x,a4 as P,D as I}from"./app-vue-BNvXdoBb.js";const _=L({name:"Ellipsis",common:j,peers:{Tooltip:$}}),H=D("ellipsis",{overflow:"hidden"},[N("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),T("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),T("cursor-pointer",`
 cursor: pointer;
 `)]);function w(i){return`${i}-ellipsis--line-clamp`}function k(i,s){return`${i}-ellipsis--cursor-${s}`}const A=Object.assign(Object.assign({},y.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),q=M({name:"Ellipsis",inheritAttrs:!1,props:A,slots:Object,setup(i,{slots:s,attrs:o}){const n=E(),r=y("Ellipsis","-ellipsis",H,_,i,n),m=u(null),g=u(null),f=u(null),c=u(!1),v=x(()=>{const{lineClamp:e}=i,{value:l}=c;return e!==void 0?{textOverflow:"","-webkit-line-clamp":l?"":e}:{textOverflow:l?"":"ellipsis","-webkit-line-clamp":""}});function h(){let e=!1;const{value:l}=c;if(l)return!0;const{value:t}=m;if(t){const{lineClamp:a}=i;if(O(t),a!==void 0)e=t.scrollHeight<=t.offsetHeight;else{const{value:C}=g;C&&(e=C.getBoundingClientRect().width<=t.getBoundingClientRect().width)}S(t,e)}return e}const b=x(()=>i.expandTrigger==="click"?()=>{var e;const{value:l}=c;l&&((e=f.value)===null||e===void 0||e.setShow(!1)),c.value=!l}:void 0);P(()=>{var e;i.tooltip&&((e=f.value)===null||e===void 0||e.setShow(!1))});const R=()=>p("span",Object.assign({},I(o,{class:[`${n.value}-ellipsis`,i.lineClamp!==void 0?w(n.value):void 0,i.expandTrigger==="click"?k(n.value,"pointer"):void 0],style:v.value}),{ref:"triggerRef",onClick:b.value,onMouseenter:i.expandTrigger==="click"?h:void 0}),i.lineClamp?s:p("span",{ref:"triggerInnerRef"},s));function O(e){if(!e)return;const l=v.value,t=w(n.value);i.lineClamp!==void 0?d(e,t,"add"):d(e,t,"remove");for(const a in l)e.style[a]!==l[a]&&(e.style[a]=l[a])}function S(e,l){const t=k(n.value,"pointer");i.expandTrigger==="click"&&!l?d(e,t,"add"):d(e,t,"remove")}function d(e,l,t){t==="add"?e.classList.contains(l)||e.classList.add(l):e.classList.contains(l)&&e.classList.remove(l)}return{mergedTheme:r,triggerRef:m,triggerInnerRef:g,tooltipRef:f,handleClick:b,renderTrigger:R,getTooltipDisabled:h}},render(){var i;const{tooltip:s,renderTrigger:o,$slots:n}=this;if(s){const{mergedTheme:r}=this;return p(B,Object.assign({ref:"tooltipRef",placement:"top"},s,{getDisabled:this.getTooltipDisabled,theme:r.peers.Tooltip,themeOverrides:r.peerOverrides.Tooltip}),{trigger:o,default:(i=n.tooltip)!==null&&i!==void 0?i:n.default})}else return o()}});export{q as N,A as a,k as b,w as c,_ as e,H as s};
